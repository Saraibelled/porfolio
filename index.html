<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sara I. Belled – Historias Visuales</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Lora:wght@500;700&display=swap" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
body {
  font-family: 'Inter', sans-serif;
  background: #F5F5F5;
  color: #111111;
  line-height: 125%;
  padding: 20px;
  text-align: center;
}
h1 {
  font-size: 36px;
  text-align: center;
    line-height: 125%;
  margin-top: 120px;
}

h1, h2, h3 {
  font-family: 'Lora', serif;
  font-weight: 700;
}

input[type="text"] {
  display: block;
  margin: 1rem auto;
  padding: 0.5rem 1rem;
  width: 80%;
  max-width: 400px;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 6px;
  background-color: #ffffff;
  color: #111111;
}
h3 {
  text-align: center;
  padding: 20px;
  font-size: 18px;
  line-height: 125%;
}

.leer-mas-btn,
.filters button {
  font-family: 'Inter', sans-serif;
}
.filters-wrapper {
  position: relative;
  overflow: hidden;
  margin-bottom: 1rem;
}
.filters-container {
  position: relative;
  padding: 0;
  margin: 0;
}

.intro {
  font-family: 'Lora', serif;
  font-weight: 400;
  font-size: 18px; 
  line-height: 1.8;
  max-width: 640px;
  margin: 16px auto 32px;
  color: #333;
}

.filters {
  display: flex;
  overflow-x: auto;
  padding: 8px 0;
  margin: 0 8px;
  gap: 8px;
  scroll-snap-type: x mandatory;
  scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-x;
  justify-content: center;
}

@media (max-width: 900px) {
  .filters {
    justify-content: flex-start;
  }
}

.filters::-webkit-scrollbar {
  display: none;
}
.filters-wrapper::before,
.filters-wrapper::after {
  content: '';
  position: absolute;
  top: 0;
  width: 30px;
  height: 100%;
  z-index: 5;
  pointer-events: none;
}
.filters-wrapper::before {
  left: 0;
  background: linear-gradient(to right, #F5F5F5, rgba(245, 245, 245, 0));
}
.filters-wrapper::after {
  right: 0;
  background: linear-gradient(to left, #F5F5F5, rgba(245, 245, 245, 0));
}
.scroll-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(250, 209, 68, 0.8);
  border: 1px solid #F88977;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  display: none;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 10;
  pointer-events: auto;
  color: #111111;
}
.scroll-left {
  left: 0;
}
.scroll-right {
  right: 0;
}
.filters button {
  flex: 0 0 auto;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 8px;
  background-color: #fff;
  cursor: pointer;
  font-size: 0.9rem;
  scroll-snap-align: start;
  white-space: nowrap;
  position: relative;
  z-index: 2;
  color: #202020;
  transition: background-color 0.3s ease, font-weight 0.3s ease;
}

.filters button.active {
  background-color: #FAD144;
  color: #111;
  font-weight: 700;
}
#contenedor-trabajos {
  display: grid;
  grid-template-columns: repeat(auto-fit, 280px);
  justify-content: center;
  gap: 2rem;
  max-width: 100%;
  margin: 0 auto;
  padding-top: 50px;
}
.tarjeta {
 width: 280px;

  padding: 1rem;
  border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.05);
  transition: transform 0.3s ease;
  background-color: #ffffff;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 100%;
  position: relative;
  margin: 0 auto;
}
.tarjeta:hover {
  transform: translateY(-5px);
}
.tarjeta img {
  width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 1rem 0;
}

.tarjeta p {
font-size: 15px;
color:#6b6b6b;
}

.estrella {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 1.5rem;
  color: #FAD144;
  cursor: default;
  z-index: 2;
}

.estrella .tooltip {
  position: absolute;
  top: -10px;
  right: 120%;
  transform: translateY(-10%);
  background-color: #333;
  color: #fff;
  padding: 8px 12px;
  border-radius: 6px;
  white-space: pre-wrap;
  font-size: 0.8rem;
  width: 220px;
  opacity: 0;
  height: auto;
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: 5;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  height: auto;
  white-space: normal;
word-break: break-word;
max-width: 320px;
}

.estrella:hover .tooltip {
  opacity: 1;
}

.estrella:hover::after {
  opacity: 1;
  transform: translateY(0);
}
.estrella-btn {
  font-size: 1.2rem;
  background: none;
  border: none;
  cursor: pointer;
  color: #999999;
}
.estrella-btn.active {
  color: #146A63;
}
.leer-mas-btn {
  margin: 0 auto;
  padding: 0.5rem 1rem;
  background-color: #fff;
  color: #202020;
  border: 1px solid #6b6b6b;
  border-radius: 6px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: background-color 0.3s ease;
}
.leer-mas-btn:hover {
  background-color: #FAD144;
    border: 1px solid #FAD144;
  color: #202020;
}
@media (max-width: 600px) {
  .filters {
    gap: 0.25rem;
  }
  .filters button {
    padding: 0.4rem 0.75rem;
    font-size: 0.8rem;
  }
}
#contenedor-trabajos-wrapper {
  position: relative;
  max-height: 2000px;
  overflow: hidden;
}

#fade-bottom {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 150px;
  background: linear-gradient(to bottom, rgba(245,245,245,0), #F5F5F5);
  pointer-events: none;
  z-index: 2;
}

#ver-mas-btn {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 3;
  background-color: #FAD144;
  border: none;
  border-radius: 6px;
  padding: 0.6rem 1.4rem;
  font-size: 1rem;
  cursor: pointer;
  font-family: 'Inter', sans-serif;
  transition: background-color 0.3s ease;
}

#ver-mas-btn:hover {
  background-color: #f7c518;
}

.parrafo {
margin-top:120px;
margin-bottom: 60px;
}
.footer {
  margin-top: 4rem;
  padding: 20px;
  font-size: 0.9rem;
  color: #666666;
  border-top: 1px solid #E0E0E0;
}
.footer p {
  margin: 0;
  font-family: 'Inter', sans-serif;
}
.toggle-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  margin: 2rem auto;
}

.toggle-label {
  font-family: 'Inter', sans-serif;
  font-size: 0.95rem;
  color: #666;
  transition: color 0.3s ease, font-weight 0.3s ease;
}

.toggle-label.active {
  color: #111;
  font-weight: 600;
}

.switch {
  position: relative;
  display: inline-block;
  width: 46px;
  height: 24px;
}
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}
.slider {
  position: absolute;
  cursor: pointer;
  background-color: #ccc;
  border-radius: 24px;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  transition: 0.4s;
}
.slider::before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  border-radius: 50%;
  transition: 0.4s;
}
input:checked + .slider {
  background-color: #FAD144;
}
input:checked + .slider::before {
  transform: translateX(22px);
}
  </style>

</head>
<body>

  <h1>Sara I Belled – Narrativa, formatos, innovación e IA</h1>

<div class="parrafo">
  <p class="intro">
  ¡Hola! Soy Sara I Belled y soy periodista visual. Eso quiere decir que me gusta contar historias, como a muchos periodistas, pero además diseño esa información en diferentes formatos y con diferentes herramientas.</p>

  <p class="intro">Me divierte resolver y disfruto buscando modos de contar mejor, más rápido y más fácil. Trabajo en la Agencia Colpisa, la redacción central de los diarios de Vocento, y muchas de las herramientas en las que trabajo son implementadas por las cabeceras. </p>

  <p class="intro">De vez en cuando cambio este porfolio y lo adapto para probar cosas nuevas. Últimamente me estaba costando regresar a él para mantenerlo y se me ocurrió que podría hacer un página que se actualizase con un excel. Esto me sirve a mí y a quien se pase por aquí. Quizá hasta es interesante tener un apartado de 'Casos de estudio', por si a alguien le inspira. Tendrás que volver para ver si al final me animo :)</p>
</div>

  <input type="text" id="buscador" placeholder="Buscar historias..." />

  <div class="filters-wrapper">
    <div class="scroll-btn scroll-left" onclick="scrollFilters('categoria-filters', -100)">←</div>
    <div class="filters-container">
      <div class="filters" id="categoria-filters">
        <button data-filter="" class="active">Todas</button>
      </div>
    </div>
    <div class="scroll-btn scroll-right" onclick="scrollFilters('categoria-filters', 100)">→</div>
  </div>

<div class="toggle-container">
  <span id="label-todos" class="toggle-label active">Mostrar todos</span>
  <label class="switch">
    <input type="checkbox" id="toggle-premios">
    <span class="slider round"></span>
  </label>
  <span id="label-premiados" class="toggle-label">Solo premiados</span>
</div>

<div id="contenedor-trabajos-wrapper">
  <div id="contenedor-trabajos"></div>
  <div id="fade-bottom"></div>
  <button id="ver-mas-btn">Ver más</button>
</div>


<div class="parrafo">
  <p class="intro">
Por si tienes curiosidad, he dejado el anterior porfolio por aquí, por si quieres echar un ojo. <a href="https://www.linkedin.com/in/saraibelled-visualjournalist/">Aquí está mi página de Linkedin</a> y también puedes <a href="https://www.linkedin.com/in/saraibelled-visualjournalist/">ponerte en contacto conmigo</a>.</p>

<footer class="footer">
  <p>&copy; <span id="anio-actual"></span> — Última actualización: <span id="fecha-reciente"></span><br>
  Un porfolio diseñado y desarrollado por Sara I Belled con algo de AIuda y mucho ♡</p>
</footer>

</div>
<script>
  let trabajosGlobal = [];
  let filtroCategoria = "";
  let filtroPremiado = "";

  function scrollFilters(id, amount) {
    const el = document.getElementById(id);
    el.scrollBy({ left: amount, behavior: 'smooth' });
  }

  function actualizarVisibilidadFlechas() {
    const wrappers = document.querySelectorAll('.filters-wrapper');
    wrappers.forEach(wrapper => {
      const container = wrapper.querySelector('.filters');
      const scrollLeftBtn = wrapper.querySelector('.scroll-left');
      const scrollRightBtn = wrapper.querySelector('.scroll-right');
      const scrollLeft = Math.round(container.scrollLeft);
      const scrollWidth = Math.round(container.scrollWidth);
      const clientWidth = Math.round(container.clientWidth);
      const maxScrollLeft = scrollWidth - clientWidth;
      const margen = 2;

      if (scrollWidth > clientWidth + 1) {
        scrollLeftBtn.style.display = scrollLeft > margen ? 'flex' : 'none';
        scrollRightBtn.style.display = scrollLeft < maxScrollLeft - margen ? 'flex' : 'none';
      } else {
        scrollLeftBtn.style.display = 'none';
        scrollRightBtn.style.display = 'none';
      }
    });
  }

  function generarFiltrosCategoria(trabajos) {
    const contenedor = document.getElementById('categoria-filters');
    const categoriasSet = new Set();
    trabajos.forEach(t => {
      t.buscadorArray.forEach(cat => {
        if (cat !== 'Narrativas') categoriasSet.add(cat);
      });
    });

    const categorias = Array.from(categoriasSet).sort();
    categorias.forEach(cat => {
      const btn = document.createElement('button');
      btn.textContent = cat;
      btn.setAttribute('data-filter', cat);
      btn.addEventListener('click', () => {
        document.querySelectorAll('#categoria-filters button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        filtroCategoria = cat;
        renderTrabajos(trabajosGlobal);
        actualizarVisibilidadFlechas();
      });
      contenedor.appendChild(btn);
    });

    contenedor.querySelector('button[data-filter=""]').addEventListener('click', () => {
      document.querySelectorAll('#categoria-filters button').forEach(b => b.classList.remove('active'));
      contenedor.querySelector('button[data-filter=""]').classList.add('active');
      filtroCategoria = "";
      renderTrabajos(trabajosGlobal);
      actualizarVisibilidadFlechas();
    });
  }

  function renderTrabajos(trabajos) {
    const contenedor = document.getElementById('contenedor-trabajos');
    const query = document.getElementById('buscador').value.toLowerCase();
    const premiadosSolo = document.getElementById('toggle-premios').checked;

    contenedor.innerHTML = '';

    trabajos.filter(trabajo => {
      const coincideTexto =
        trabajo.titulo?.toLowerCase().includes(query) ||
        trabajo.categoria?.toLowerCase().includes(query);
      const coincideCategoria = !filtroCategoria || trabajo.buscadorArray.includes(filtroCategoria);
      const coincidePremiado = !premiadosSolo || trabajo.premiado;
      return coincideTexto && coincideCategoria && coincidePremiado;
    }).forEach(trabajo => {
      const tarjeta = document.createElement('div');
      tarjeta.className = 'tarjeta';
      tarjeta.style.backgroundColor = trabajo.colorFondo || '#ffffff';
      tarjeta.style.color = trabajo.colorTexto || '#000000';

const textoPremio = (trabajo['donde-premiado'] || trabajo.premiado || '')
  .replace(/&/g, '&amp;')
  .replace(/</g, '&lt;')
  .replace(/>/g, '&gt;')
  .replace(/"/g, '&quot;')
  .replace(/'/g, '&#39;')
  .replace(/\\n/g, '<br>');


      tarjeta.innerHTML = `
  ${trabajo.premiado ? `
  <div class="estrella">
    ★
    <div class="tooltip">${textoPremio}</div>
  </div>` : ''}
        <h3>${trabajo.titulo}</h3>
        <p style="color: ${trabajo.colorfecha || '#6b6b6b'}">${trabajo.fecha}</p>

        ${trabajo.imagen?.endsWith('.mp4') || trabajo.imagen?.endsWith('.webm') ? `
  <video controls width="100%" style="border-radius: 8px; margin: 1rem 0;">
    <source src="${trabajo.imagen}" type="video/mp4">
    Tu navegador no soporta video HTML5.
  </video>` :
trabajo.imagen?.includes('youtube.com') || trabajo.imagen?.includes('vimeo.com') ? `
  <iframe src="${trabajo.imagen}" frameborder="0" allowfullscreen style="width: 100%; aspect-ratio: 16 / 9; border-radius: 8px; margin: 1rem 0;"></iframe>` :
trabajo.imagen ? `
  <img src="${trabajo.imagen}" alt="${trabajo.titulo}" loading="lazy" style="border-radius: 8px; margin: 1rem 0;" />` : ''}
        <button onclick="window.open('${trabajo.url}', '_blank')" class="leer-mas-btn">Leer más</button>
      `;
      contenedor.appendChild(tarjeta);
    });

    evaluarAlturaTrabajos();
  }

  function evaluarAlturaTrabajos() {
    const wrapper = document.getElementById('contenedor-trabajos-wrapper');
    const inner = document.getElementById('contenedor-trabajos');
    const fade = document.getElementById('fade-bottom');
    const btn = document.getElementById('ver-mas-btn');

    setTimeout(() => {
      const altura = inner.offsetHeight;
      if (altura > 2000) {
        fade.style.display = 'block';
        btn.style.display = 'block';
        wrapper.style.maxHeight = '2000px';
      } else {
        fade.style.display = 'none';
        btn.style.display = 'none';
        wrapper.style.maxHeight = 'none';
      }
    }, 100);
  }

  document.getElementById('ver-mas-btn').addEventListener('click', () => {
    document.getElementById('fade-bottom').style.display = 'none';
    document.getElementById('ver-mas-btn').style.display = 'none';
    document.getElementById('contenedor-trabajos-wrapper').style.maxHeight = 'none';
  });

  document.getElementById('buscador').addEventListener('input', () => {
    renderTrabajos(trabajosGlobal);
  });

  document.getElementById('toggle-premios').addEventListener('change', function () {
    const labelTodos = document.getElementById('label-todos');
    const labelPremiados = document.getElementById('label-premiados');

    if (this.checked) {
      labelTodos.classList.remove('active');
      labelPremiados.classList.add('active');
    } else {
      labelTodos.classList.add('active');
      labelPremiados.classList.remove('active');
    }

    renderTrabajos(trabajosGlobal);
  });

  fetch('https://raw.githubusercontent.com/Saraibelled/porfolio/refs/heads/main/CSV_Art_culos.csv')
    .then(response => {
      if (!response.ok) throw new Error('Error al cargar el CSV');
      return response.text();
    })
    .then(csvText => {
      const data = Papa.parse(csvText, {
        header: true,
        skipEmptyLines: true
      }).data;

      data.forEach(trabajo => {
        trabajo.buscadorArray = (trabajo.buscador || "")
          .split(',')
          .map(c => c.trim())
          .filter(Boolean);
      });

      data.sort((a, b) => new Date(b.fecha) - new Date(a.fecha));
      const fechaMasReciente = data[0]?.fecha;
      if (fechaMasReciente) {
        const fechaFormateada = new Date(fechaMasReciente).toLocaleDateString('es-ES', {
          year: 'numeric', month: 'long', day: 'numeric'
        });
        document.getElementById('fecha-reciente').textContent = fechaFormateada;
      }

      trabajosGlobal = data;
      generarFiltrosCategoria(data);
      renderTrabajos(data);
      setTimeout(actualizarVisibilidadFlechas, 100);
      setTimeout(actualizarVisibilidadFlechas, 300);
    })
    .catch(error => {
      console.error("Error al cargar los datos:", error);
      document.getElementById("contenedor-trabajos").innerHTML =
        "<p>Error al cargar los trabajos. Intenta más tarde.</p>";
    });

  window.addEventListener('resize', actualizarVisibilidadFlechas);
  window.addEventListener('load', () => {
    document.querySelectorAll('.filters').forEach(f => {
      f.addEventListener('scroll', actualizarVisibilidadFlechas);
    });
  });

  document.getElementById('anio-actual').textContent = new Date().getFullYear();
</script>



</body>
</html>
